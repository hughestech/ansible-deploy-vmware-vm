---
- name: Fix Partition
  hosts: workers
  #connection: local
  gather_facts: no


  vars:
      - ssh_username: "deploy"
      - openshift_release: "3.11"
      - dns:
          metrics: metrics.uka.topia.nz
          public_hostname: uka.topia.nz
          apps: apps.uka.topia.nz
          master_default_subdomain: internal.uka.topia.nz

  vars_files:
    - "vars/vm-size/{{size}}.yaml"
    - "vars/environment/{{env}}.yaml"


  tasks:

    - parted: device=/dev/sda unit=MiB
      register: sda_info

    - name: "partition info"
      debug:  
        msg: "Partiion info is {{ sda_info }}"

    - parted:
        device: /dev/sda
        number: 3
        flags: [ lvm ]
        state: present
        part_start: 16777216kiB
        part_end: 100%
      become: true

    