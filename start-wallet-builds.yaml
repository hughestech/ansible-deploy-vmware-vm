---
- name: build wallets
  hosts: workers
  connection: local
  gather_facts: no
  
  vars_prompt:
    - name: "username"
      prompt: "what is your Openshift username?"
      private: no
    - name: "password"
      prompt: "what is your OpenShift password?"
      private: yes
      

  tasks:
  
  - name: login to openshift
    command: "oc login https://uka.topia.nz:8443  --insecure-skip-tls-verify=true -p={{password}} -u={{username}}"
    delegate_to: localhost

  - name: label node
    command: "oc delete pod {{symbol}}-walletrunner-1-build -n {{symbol}}"
    delegate_to: localhost
    
  - name: start wallet-builder build
    command: "oc start-build {{symbol}}-walletbuilder -n {{symbol}}"
